# test_code

A Flutter test code for basic counter app.

[ì•± í…ŒìŠ¤íŠ¸](https://flutter-ko.dev/docs/testing)

- Unit Test : ë‹¨ìœ„ ê¸°ëŠ¥, ë°©ë²• ë˜ëŠ” í´ë˜ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸. (ê°€ì¥ ì‘ì€ ë‹¨ìœ„ì˜ í…ŒìŠ¤íŠ¸)
- Widget Test : ë‹¨ì¼ ìœ„ì ¯ì„ í…ŒìŠ¤íŠ¸. (ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸)
- Integration Test : ì™„ì„±ëœ ì•±ì´ë‚˜ ì•±ì˜ ìƒë‹¹ ë¶€ë¶„ì„ í…ŒìŠ¤íŠ¸



## Unit Test(ë‹¨ìœ„ í…ŒìŠ¤íŠ¸)

- ë‹¨ìœ„ê¸°ëŠ¥, ë°©ë²• ë˜ëŠ” í´ë˜ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•œë‹¤. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì˜ ëª©ì ì€ ë‹¤ì–‘í•œ ì¡°ê±´ ì•„ë˜ì—ì„œ ë¡œì§ ë‹¨ìœ„ì˜ ì •í™•ì„±ì„ ê²€ì¦í•˜ëŠ” ê²ƒì´ë‹¤.
- ì¼ë°˜ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ë˜ëŠ” ë‹¨ìœ„ ì¡°ì§ì˜ ì™¸ë¶€ ì˜ì¡´ì„±ì€ ëª¨ì˜ ê°ì²´ë¡œ ëŒ€ì²´í•œë‹¤.
- ì‚¬ìš©ë°©ë²•
  - [Mockitoë¥¼ ì‚¬ìš©í•´ì„œ mock ê°ì²´ ìƒì„±í•˜ê¸°](https://flutter-ko.dev/docs/cookbook/testing/unit/mocking)
  - [ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì†Œê°œ](https://flutter-ko.dev/docs/cookbook/testing/unit/introduction)



## Widget Test(ìœ„ì ¯ í…ŒìŠ¤íŠ¸)

- ë‹¨ì¼ ìœ„ì ¯ì„ í…ŒìŠ¤íŠ¸í•œë‹¤. ìœ„ì ¯ í…ŒìŠ¤íŠ¸ì˜ ëª©ì ì€ ìœ„ì ¯ UIê°€ ì˜ˆìƒí•œëŒ€ë¡œ ë³´ì´ê³  ìƒí˜¸ ì‘ìš©í•˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ” ê²ƒì´ë‹¤.
- ìœ„ì ¯ í…ŒìŠ¤íŠ¸ëŠ” ë‹¤ìˆ˜ì˜ í´ë˜ìŠ¤ë¥¼ í¬í•¨í•˜ë©° ì í•©í•œ ìœ„ì ¯ ìƒëª…ì£¼ê¸° ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ëŠ” í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ìš”êµ¬í•œë‹¤.
- ì‚¬ìš©ë°©ë²•
  - [ìœ„ì ¯ í…ŒìŠ¤íŠ¸ ì†Œê°œ](https://flutter-ko.dev/docs/cookbook/testing/widget/introduction)
  - [Find Widgets](https://flutter-ko.dev/docs/cookbook/testing/widget/finders)
  - [Tap, rag, and enter text](https://flutter-ko.dev/docs/cookbook/testing/widget/tap-drag)



## Integration Test(í†µí•© í…ŒìŠ¤íŠ¸)

- ì™„ì„±ëœ ì•±ì´ë‚˜ ì•±ì˜ ìƒë‹¹ ë¶€ë¶„ì„ í…ŒìŠ¤íŠ¸í•œë‹¤. í†µí•© í…ŒìŠ¤íŠ¸ì˜ ëª©ì ì€ ì•±ì´ ì „ì²´ì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€, ëª¨ë“  ìœ„ì ¯ì´ ì˜ˆìƒëŒ€ë¡œ ì„œë¡œ í†µí•©ë˜ì–´ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ë‹¤.
- ì•±ì˜ ì„±ëŠ¥ ê²€ì¦ì„ ìœ„í•´ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.
- ì‚¬ìš©ë°©ë²•
  - [Handle Scrolling](https://flutter-ko.dev/docs/cookbook/testing/integration/scrolling)
  - [Performance profiling](https://flutter-ko.dev/docs/cookbook/testing/integration/profiling)
  - [í†µí•©í…ŒìŠ¤íŠ¸ ì†Œê°œ](https://flutter-ko.dev/docs/cookbook/testing/integration/introduction)



---

## âœ… TestCode

ìš°ì„  `Provider` ë¥¼ ì´ìš©í•´ì„œ `Counter app` ì„ êµ¬í˜„í–ˆë‹¤.

ì•±ì˜ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ìº¡ì³ ì‚¬ì§„ê³¼ ê°™ì´ êµ¬ì¡°ë¥¼ ì§œë´¤ë‹¤.

![image](https://user-images.githubusercontent.com/43080040/87552601-dd8fed00-c6ec-11ea-9be1-499955ead2c3.png)



ğŸ‘¨â€ğŸ’» `lib/main.dart`

```dart
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import 'package:test_code/screens/my_home_page.dart';

import 'model/counter.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return ChangeNotifierProvider(
      create: (context) => Counter(),
      child: MaterialApp(
        title: 'Flutter Demo',
        theme: ThemeData(
          primarySwatch: Colors.blue,
          visualDensity: VisualDensity.adaptivePlatformDensity,
        ),
        home: MyHomePage(title: 'Flutter Counter App'),
      ),
    );
  }
}
```

> âœ“ `MaterialApp` ì„  `ChangeNotifierProvider` ë¡œ ê°ì‹¼ ì´ìœ ëŠ”, `Provider`ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œë‹¤.



ğŸ‘¨â€ğŸ’» `lib/model/counter.dart` : `Provider` ë¡œ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„.

```dart
import 'package:flutter/cupertino.dart';

class Counter extends ChangeNotifier {
  int count = 0;

  void increment() {
    count++;
    notifyListeners();
  }
}
```



ğŸ‘¨â€ğŸ’» `lib/screens/my_home_page` : í™”ë©´ì„ ë”°ë¡œ ë¹¼ì„œ êµ¬í˜„.

```dart
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import 'package:test_code/model/counter.dart';

class MyHomePage extends StatefulWidget {
  MyHomePage({Key key, this.title}) : super(key: key);

  final String title;

  @override
  _MyHomePageState createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(widget.title),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            Text(
              'You have pushed the button this many times:',
            ),
            Consumer<Counter>(
              builder: (context, counter, child) {
                return Text(
                  counter.count.toString(),
                  style: Theme.of(context).textTheme.headline4,
                );
              },
            ),
            ///Text(Provider.of<Counter>(context).count.toString())
          ],
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: () =>
            Provider.of<Counter>(context, listen: false).increment(),
        tooltip: 'Increment',
        child: Icon(Icons.add),
      ),
    );
  }
}
```

> `Counter` í´ë˜ìŠ¤ì—ì„œ ìˆ«ìê°’ì¸ countë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„  `Consumer` ìœ„ì ¯ì„ ì‚¬ìš©í–ˆëŠ”ë°, ì´ëŠ” return ê°’ì´ `Text` ë¼ëŠ” ìœ„ì ¯ì´ê¸° ë•Œë¬¸ì´ë‹¤. ìœ„ì ¯ì„ return ê°’ìœ¼ë¡œ ë°›ì„ ë•ŒëŠ” `Consumer` ë¥¼  ì‚¬ìš©í•˜ê³ , `floatingActionButton` ì—ì„œ ì“´ ê²ƒê³¼ ê°™ì´, í•¨ìˆ˜ë§Œ ë¶ˆëŸ¬ì˜¤ê±°ë‚˜, ê°’ë§Œì„ ë¶ˆëŸ¬ì˜¬ ë•ŒëŠ”, `Provider.of<Counter>`ë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤.
>
> `Counter` í´ë˜ìŠ¤ì—ì„œ ìˆ«ìê°’ë§Œì„ ê°€ì ¸ì˜¬ë•Œ, `Consumer` ëŒ€ì‹  `Provider.of<Counter>` ë¥¼ ì‚¬ìš©í•´ë„ ë¬´ë°©í•˜ë‹¤. 
>
> âŒê²°êµ­ ë‘˜ë‹¤ ê°™ì€ ì—­í• ì´ì§€ë§Œ, ìƒí™©ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì“°ë©´ ëœë‹¤.
>
> â€¼ï¸`Provider.of<Counter>(context,listen:false).increment()` ì—ì„œ `listen`ì€ ë²„íŠ¼ì— ì ìš©ì‹œí‚¬ë• ë¬´ì¡°ê±´ falseê°’ì„ ì¤˜ì•¼í•œë‹¤. ê¸°ë³¸ê°’ì€ trueì¸ë°, trueë¡œ í•´ë†“ìœ¼ë©´ ê³„ì†í•´ì„œ ë°”ë¼ë³´ê³  ìˆê¸° ë•Œë¬¸ì— ê³¼ë¶€í™”(?)ê°™ì€ê²Œ ê±¸ë¦´ ìˆ˜ ìˆë‹¤.



