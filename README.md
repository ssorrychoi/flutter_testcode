# test_code

A Flutter test code for basic counter app.

[ì•± í…ŒìŠ¤íŠ¸](https://flutter-ko.dev/docs/testing)

- Unit Test : ë‹¨ìœ„ ê¸°ëŠ¥, ë°©ë²• ë˜ëŠ” í´ë˜ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸. (ê°€ì¥ ì‘ì€ ë‹¨ìœ„ì˜ í…ŒìŠ¤íŠ¸)
- Widget Test : ë‹¨ì¼ ìœ„ì ¯ì„ í…ŒìŠ¤íŠ¸. (ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸)
- Integration Test : ì™„ì„±ëœ ì•±ì´ë‚˜ ì•±ì˜ ìƒë‹¹ ë¶€ë¶„ì„ í…ŒìŠ¤íŠ¸



## Unit Test(ë‹¨ìœ„ í…ŒìŠ¤íŠ¸)

- ë‹¨ìœ„ê¸°ëŠ¥, ë°©ë²• ë˜ëŠ” í´ë˜ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•œë‹¤. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì˜ ëª©ì ì€ ë‹¤ì–‘í•œ ì¡°ê±´ ì•„ë˜ì—ì„œ ë¡œì§ ë‹¨ìœ„ì˜ ì •í™•ì„±ì„ ê²€ì¦í•˜ëŠ” ê²ƒì´ë‹¤.
- ì¼ë°˜ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ë˜ëŠ” ë‹¨ìœ„ ì¡°ì§ì˜ ì™¸ë¶€ ì˜ì¡´ì„±ì€ ëª¨ì˜ ê°ì²´ë¡œ ëŒ€ì²´í•œë‹¤.
- ì‚¬ìš©ë°©ë²•
  - [Mockitoë¥¼ ì‚¬ìš©í•´ì„œ mock ê°ì²´ ìƒì„±í•˜ê¸°](https://flutter-ko.dev/docs/cookbook/testing/unit/mocking)
  - [ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì†Œê°œ](https://flutter-ko.dev/docs/cookbook/testing/unit/introduction)



## Widget Test(ìœ„ì ¯ í…ŒìŠ¤íŠ¸)

- ë‹¨ì¼ ìœ„ì ¯ì„ í…ŒìŠ¤íŠ¸í•œë‹¤. ìœ„ì ¯ í…ŒìŠ¤íŠ¸ì˜ ëª©ì ì€ ìœ„ì ¯ UIê°€ ì˜ˆìƒí•œëŒ€ë¡œ ë³´ì´ê³  ìƒí˜¸ ì‘ìš©í•˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ” ê²ƒì´ë‹¤.
- ìœ„ì ¯ í…ŒìŠ¤íŠ¸ëŠ” ë‹¤ìˆ˜ì˜ í´ë˜ìŠ¤ë¥¼ í¬í•¨í•˜ë©° ì í•©í•œ ìœ„ì ¯ ìƒëª…ì£¼ê¸° ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ëŠ” í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ìš”êµ¬í•œë‹¤.
- ì‚¬ìš©ë°©ë²•
  - [ìœ„ì ¯ í…ŒìŠ¤íŠ¸ ì†Œê°œ](https://flutter-ko.dev/docs/cookbook/testing/widget/introduction)
  - [Find Widgets](https://flutter-ko.dev/docs/cookbook/testing/widget/finders)
  - [Tap, rag, and enter text](https://flutter-ko.dev/docs/cookbook/testing/widget/tap-drag)



## Integration Test(í†µí•© í…ŒìŠ¤íŠ¸)

- ì™„ì„±ëœ ì•±ì´ë‚˜ ì•±ì˜ ìƒë‹¹ ë¶€ë¶„ì„ í…ŒìŠ¤íŠ¸í•œë‹¤. í†µí•© í…ŒìŠ¤íŠ¸ì˜ ëª©ì ì€ ì•±ì´ ì „ì²´ì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€, ëª¨ë“  ìœ„ì ¯ì´ ì˜ˆìƒëŒ€ë¡œ ì„œë¡œ í†µí•©ë˜ì–´ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ë‹¤.
- ì•±ì˜ ì„±ëŠ¥ ê²€ì¦ì„ ìœ„í•´ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.
- ì‚¬ìš©ë°©ë²•
  - [Handle Scrolling](https://flutter-ko.dev/docs/cookbook/testing/integration/scrolling)
  - [Performance profiling](https://flutter-ko.dev/docs/cookbook/testing/integration/profiling)
  - [í†µí•©í…ŒìŠ¤íŠ¸ ì†Œê°œ](https://flutter-ko.dev/docs/cookbook/testing/integration/introduction)



---

## âœ… TestCode

ìš°ì„  `Provider` ë¥¼ ì´ìš©í•´ì„œ `Counter app` ì„ êµ¬í˜„í–ˆë‹¤.

ì•±ì˜ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ìº¡ì³ ì‚¬ì§„ê³¼ ê°™ì´ êµ¬ì¡°ë¥¼ ì§œë´¤ë‹¤.

![image](https://user-images.githubusercontent.com/43080040/87552601-dd8fed00-c6ec-11ea-9be1-499955ead2c3.png)



ğŸ‘¨â€ğŸ’» `lib/main.dart`

```dart
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import 'package:test_code/screens/my_home_page.dart';

import 'model/counter.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return ChangeNotifierProvider(
      create: (context) => Counter(),
      child: MaterialApp(
        title: 'Flutter Demo',
        theme: ThemeData(
          primarySwatch: Colors.blue,
          visualDensity: VisualDensity.adaptivePlatformDensity,
        ),
        home: MyHomePage(title: 'Flutter Counter App'),
      ),
    );
  }
}
```

> âœ“ `MaterialApp` ì„  `ChangeNotifierProvider` ë¡œ ê°ì‹¼ ì´ìœ ëŠ”, `Provider`ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œë‹¤.



ğŸ‘¨â€ğŸ’» `lib/model/counter.dart` : `Provider` ë¡œ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„.

```dart
import 'package:flutter/cupertino.dart';

class Counter extends ChangeNotifier {
  int count = 0;

  void increment() {
    count++;
    notifyListeners();
  }
}
```



ğŸ‘¨â€ğŸ’» `lib/screens/my_home_page` : í™”ë©´ì„ ë”°ë¡œ ë¹¼ì„œ êµ¬í˜„.

```dart
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import 'package:test_code/model/counter.dart';

class MyHomePage extends StatefulWidget {
  MyHomePage({Key key, this.title}) : super(key: key);

  final String title;

  @override
  _MyHomePageState createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(widget.title),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            Text(
              'You have pushed the button this many times:',
            ),
            Consumer<Counter>(
              builder: (context, counter, child) {
                return Text(
                  counter.count.toString(),
                  style: Theme.of(context).textTheme.headline4,
                );
              },
            ),
            ///Text(Provider.of<Counter>(context).count.toString())
          ],
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: () =>
            Provider.of<Counter>(context, listen: false).increment(),
        tooltip: 'Increment',
        child: Icon(Icons.add),
      ),
    );
  }
}
```

> `Counter` í´ë˜ìŠ¤ì—ì„œ ìˆ«ìê°’ì¸ countë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„  `Consumer` ìœ„ì ¯ì„ ì‚¬ìš©í–ˆëŠ”ë°, ì´ëŠ” return ê°’ì´ `Text` ë¼ëŠ” ìœ„ì ¯ì´ê¸° ë•Œë¬¸ì´ë‹¤. ìœ„ì ¯ì„ return ê°’ìœ¼ë¡œ ë°›ì„ ë•ŒëŠ” `Consumer` ë¥¼  ì‚¬ìš©í•˜ê³ , `floatingActionButton` ì—ì„œ ì“´ ê²ƒê³¼ ê°™ì´, í•¨ìˆ˜ë§Œ ë¶ˆëŸ¬ì˜¤ê±°ë‚˜, ê°’ë§Œì„ ë¶ˆëŸ¬ì˜¬ ë•ŒëŠ”, `Provider.of<Counter>`ë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤.
>
> `Counter` í´ë˜ìŠ¤ì—ì„œ ìˆ«ìê°’ë§Œì„ ê°€ì ¸ì˜¬ë•Œ, `Consumer` ëŒ€ì‹  `Provider.of<Counter>` ë¥¼ ì‚¬ìš©í•´ë„ ë¬´ë°©í•˜ë‹¤. 
>
> âŒê²°êµ­ ë‘˜ë‹¤ ê°™ì€ ì—­í• ì´ì§€ë§Œ, ìƒí™©ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì“°ë©´ ëœë‹¤.
>
> â€¼ï¸`Provider.of<Counter>(context,listen:false).increment()` ì—ì„œ `listen`ì€ ë²„íŠ¼ì— ì ìš©ì‹œí‚¬ë• ë¬´ì¡°ê±´ falseê°’ì„ ì¤˜ì•¼í•œë‹¤. ê¸°ë³¸ê°’ì€ trueì¸ë°, trueë¡œ í•´ë†“ìœ¼ë©´ ê³„ì†í•´ì„œ ë°”ë¼ë³´ê³  ìˆê¸° ë•Œë¬¸ì— ê³¼ë¶€í™”(?)ê°™ì€ê²Œ ê±¸ë¦´ ìˆ˜ ìˆë‹¤.



---

## An introduction to unit testing

ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ê¸°ì¡´ ê¸°ëŠ¥ì„ ë³€ê²½í–ˆì„ë•Œ, ì•±ì´ ì—¬ì „íˆ ì œëŒ€ë¡œ ë™ì‘í•œë‹¤ëŠ” ê²ƒì„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.

ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” í•˜ë‚˜ì˜ í•¨ìˆ˜, method ë˜ëŠ” í´ë˜ìŠ¤ì˜ ë™ì‘ì„ ê²€ì¦í•˜ê¸° ìœ„í•´ ì•„ì£¼ ìœ ìš©í•˜ë‹¤. `test` íŒ¨í‚¤ì§€ëŠ” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±ì„ ìœ„í•´ í•µì‹¬ í”„ë ˆì„ì›Œí¬ë¥¼ ì œê³µí•˜ë©°, `flutter_test` íŒ¨í‚¤ì§€ëŠ” ìœ„ì ¯ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì¶”ê°€ì ì¸ ìœ í‹¸ë¦¬í‹°ë¥¼ ì œê³µí•œë‹¤.

ğŸ“ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
>1. `test`í˜¹ì€ `flutter_test` ì˜ì¡´ì„± ì¶”ê°€í•˜ê¸°
2. í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±í•˜ê¸°
3. í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ í´ë˜ìŠ¤ ìƒì„±í•˜ê¸°
4. í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ test ì½”ë“œ ì‘ì„±í•˜ê¸°
5. ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ `group`ìœ¼ë¡œ ê²°í•©í•˜ê¸°
6. í…ŒìŠ¤íŠ¸ ìˆ˜í–‰í•˜ê¸°


### 1. ğŸ‘¨ğŸ»â€ğŸ’» test ì˜ì¡´ì„± ì¶”ê°€í•˜ê¸°
ë§Œì•½ Flutterì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” dart packagesì—ì„œ ì‘ì—…í•˜ê³  ìˆë‹¤ë©´ `test` íŒ¨í‚¤ì§€ë¥¼ import í•˜ë©´ ëœë‹¤. `test`íŒ¨í‚¤ì§€ëŠ” dartì—ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•œ í•µì‹¬ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. 
```
dev_dependencies:
  test: <latest_version>
```

### 2. ğŸ‘¨ğŸ»â€ğŸ’» í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±í•˜ê¸°
ë³¸ ì˜ˆì œì—ì„œëŠ” ë‘ê°œì˜ íŒŒì¼ì„ ë§Œë“¤ ê²ƒì´ë‹¤. `counter.dart` ì™€ `counter_test.dart` íŒŒì¼.
`counter.dart`íŒŒì¼ì€ í…ŒìŠ¤íŠ¸ ëŒ€ìƒì´ ë  í´ë˜ìŠ¤ë¥¼ í¬í•¨í•˜ë©°, `lib`í´ë”ì— ìœ„ì¹˜í•œë‹¤. 
`counter_test.dart`íŒŒì¼ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í¬í•¨í•˜ë©°, `test`í´ë”ì— ìœ„ì¹˜í•œë‹¤.

ë‹¤ìŒê³¼ ê°™ì€ í´ë” êµ¬ì¡°ë¥¼ ê°–ê²Œëœë‹¤.
```
counter_app/
  lib/
    model/
      counter.dart
  test/
    unit_test/
      counter_test.dart
```

### 3. ğŸ‘¨ğŸ»â€ğŸ’» í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ í´ë˜ìŠ¤ ìƒì„±í•˜ê¸°
ì´ì œ í…ŒìŠ¤íŠ¸í•  ëŒ€ìƒì´ í•„ìš”í•˜ë‹¤. 
âœ… ê¸°ì–µí•  ê²ƒ : í•¨ìˆ˜, method, class ëª¨ë‘ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì˜ ìµœì†Œ ë‹¨ìœ„ê°€ ë  ìˆ˜ ìˆë‹¤.
ë³¸ ì˜ˆì œì—ì„œëŠ” `lib/model/counter.dart` íŒŒì¼ì— `Counter`í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤. ì´ í´ë˜ìŠ¤ëŠ” 0ë¶€í„° ì‹œì‘í•˜ëŠ” valueì˜ ì¦ê°€, ê°ì†Œë¥¼ ë‹´ë‹¹í•  ê²ƒì´ë‹¤.
ğŸš€providerë¥¼ ì´ìš©í•´ êµ¬í˜„í–ˆë‹¤.
```
import 'package:flutter/cupertino.dart';

class Counter extends ChangeNotifier {
  int count = 0;

  void increment() {
    count++;
    notifyListeners();
  }

  void decrement() {
    count--;
    notifyListeners();
  }
}

```

### 4. ğŸ‘¨ğŸ»â€ğŸ’» í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ test ì½”ë“œ ì‘ì„±í•˜ê¸°
`counter_test.dart` íŒŒì¼ì— ì²« ë²ˆì§¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ë³´ì. í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ìµœìƒìœ„ ë ˆë²¨ì˜ `test`í•¨ìˆ˜ë¥¼ í†µí•´ ì‘ì„±ë˜ë©°, ìµœìƒìœ„ ë ˆë²¨ì˜ `expect`í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ê·¸ ê²°ê³¼ê°€ ì˜¬ë°”ë¥¸ì§€ ì²´í¬í•  ìˆ˜ ìˆë‹¤.

```
import 'package:test/test.dart';
import 'package:test_code/model/counter.dart';

void main(){
  test('test for Counter provider', () {
    final counter = Counter();

    counter.increment();
    expect(counter.count, 1);
  });
}
```

### 5. ğŸ‘¨ğŸ»â€ğŸ’» ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ groupìœ¼ë¡œ ê²°í•©í•˜ê¸°
ë§Œì•½ ê´€ë ¨ìˆëŠ” ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ ì½”ë“œë“¤ì´ ìˆë‹¤ë©´, `test` íŒ¨í‚¤ì§€ì—ì„œ ì œê³µí•˜ëŠ” `group`í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°í•©í•  ìˆ˜ ìˆë‹¤.
```
void main(){
  group('test Counter Provider', (){
    test('test for Counter increment', () {
      final counter = Counter();

      counter.increment();
      expect(counter.count, 1);
    });
    test('test for Counter decrement', (){
      final counter = Counter();

      counter.decrement();
      expect(counter.count, -1);
    });
  });
}
```

### 6. ğŸ‘¨ğŸ»â€ğŸ’» í…ŒìŠ¤íŠ¸ ìˆ˜í–‰í•˜ê¸°
IDEë¥¼ ì‚¬ìš©í•œë‹¤ë©´, `counter.dart`íŒŒì¼ì„ ì—´ê³  Run ë²„íŠ¼ì´ ì†ŒìŠ¤ì½”ë“œ ì˜†ì— ìˆì„ ê²ƒì´ë‹¤. Run ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ìˆ˜í–‰ì´ ëœë‹¤.

editorë¥¼ ì‚¬ìš©í•œë‹¤ë©´ í„°ë¯¸ë„ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.
> flutter test 'íŒŒì¼ìœ„ì¹˜'
> ex) $ flutter test test/counter_test.dart